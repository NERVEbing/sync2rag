input:
  # Required. Root directory to scan for input documents (must not contain output.root_dir).
  root_dir: /path/to/root
  # Optional (default: []). Extensions to convert via docling.
  include_ext: [".pdf", ".docx", ".pptx"]
  # Optional (default: []). Extensions to pass through without conversion.
  passthrough_ext: []
  # Optional (default: []). Glob patterns to ignore while scanning.
  exclude_globs: ["~$*", ".DS_Store", "**/._*"]
  # Optional (default: false). Whether to follow symlinks during scan.
  follow_symlinks: false
  # Optional (default: 500). Skip files larger than this size (MB).
  max_file_size_mb: 500

docling:
  # Required. Docling service base URL.
  base_url: http://DOCLING_HOST:5001
  # Optional (default: file). Docling endpoint name.
  endpoint: file
  # Optional (default: true). Use async processing when supported.
  use_async: true
  # Optional (default: 5). Poll interval for async jobs.
  async_poll_interval_sec: 5
  # Optional (default: 3600). Max wait time for async jobs; set <=0 to disable.
  async_timeout_sec: 3600
  # Optional (default: 600). HTTP timeout for docling requests.
  timeout_sec: 600
  options:
    # Optional (default: []). Allowed input formats.
    from_formats: ["pdf", "docx", "pptx"]
    # Optional (default: ["md"]). Output formats to request.
    to_formats: ["md", "json"]
    # Optional (default: zip). Output packaging type.
    target_type: zip
    # Optional (default: referenced). Image export mode for docling.
    image_export_mode: referenced
    # Optional (default: true). Whether to include images in output.
    include_images: true
    # Optional (default: 2.0). Image scale factor for exports.
    images_scale: 2.0
    # Optional (default: true). Enable OCR.
    do_ocr: true
    # Optional (default: false). Force OCR even when text is detected.
    force_ocr: false
    # Optional (default: tesseract). OCR engine identifier.
    ocr_engine: rapidocr
    # Optional (default: []). OCR language list.
    ocr_lang: ["ch_sim", "en", "fr", "de"]
    # Optional (default: dlparse_v4). PDF backend used by docling.
    pdf_backend: pypdfium2
    # Optional (default: standard). Docling pipeline name.
    pipeline: standard
    # Optional (default: null). Per-document processing timeout.
    document_timeout: 3600
  # Optional (default: skip_document). Action when VLM/captioning fails.
  on_vlm_error: skip_document
  # Optional (default: skip_document). Action when docling fails.
  on_docling_error: skip_document

captioning:
  # Optional section. Omit to disable image captioning.
  # Required to enable captioning. VLM chat completion endpoint.
  url: http://CAPTIONING_HOST:4000/v1/chat/completions
  headers:
    # Optional (default: {}). API auth header for captioning service.
    Authorization: "Bearer YOUR_LLM_API_KEY"
  params:
    # Required to enable captioning. Model name to use.
    model: qwen-vl-plus
    # Optional. Max tokens for the caption response.
    max_completion_tokens: 200
  # Optional (default: 30). Per-request timeout in seconds.
  timeout: 20
  # Optional (currently unused). Max concurrent captioning requests.
  concurrency: 2
  # Optional (default: "Describe this image in a few sentences."). Prompt used for captions.
  prompt: "Respond in Chinese. Describe the image in 1-2 concise sentences. Do not add any polite preface or conversational filler. Avoid acknowledgements like OK/Sure. No lists or Markdown. Only output the description."

output:
  # Optional (default: data). Root output directory for generated files (must not contain input.root_dir).
  root_dir: data
  # Optional (default: data/markdown). Markdown output directory.
  markdown_dir: data/markdown
  # Optional (default: data/docling/json). Docling JSON output directory.
  docling_json_dir: data/docling/json
  # Optional (default: data/docling/zip). Docling ZIP output directory.
  docling_zip_dir: data/docling/zip
  # Optional (default: data/docling/images). Extracted images output directory.
  images_dir: data/docling/images
  # Optional (default: true). Keep docling ZIP files on disk.
  keep_zip: true
  # Optional (default: ""). Public base URL for serving images/markdown.
  public_base_url: http://PUBLIC_HOST:8000/
  # Optional (default: ""). Optional prefix to prepend to public URLs.
  public_path_prefix: ""
  # Optional (default: true). Rewrite image links in docling markdown.
  rewrite_docling_image_links: true
  # Optional (default: false). Rewrite links in passthrough markdown files.
  rewrite_passthrough_md: false
  # Optional (default: false). Enable image deduplication.
  image_dedupe: false
  # Optional (default: data/docling/images/_dedup). Directory for deduplicated images.
  image_dedupe_dir: data/docling/images/_dedup

manifest:
  # Optional (default: manifests/manifest.json). Full manifest path for all files.
  full_path: manifests/manifest.json
  # Optional (default: manifests/manifest.rag.json). RAG manifest path.
  rag_path: manifests/manifest.rag.json
  # Optional (default: true). Include image index entries in manifest.
  include_image_index: true
  # Optional (default: sha256). Hash algorithm for file fingerprints.
  hash_algo: sha256
  dedupe:
    # Optional (default: source_sha256). First dedupe key.
    stage1: source_sha256
    # Optional (default: md_sha256). Second dedupe key.
    stage2: md_sha256
    # Optional (default: shortest_path). Canonical file selection strategy.
    canonical_strategy: shortest_path

lightrag:
  # Required for sync. LightRAG base URL.
  base_url: http://LIGHTRAG_HOST:9621
  # Required for sync. LightRAG API key.
  api_key: "YOUR_LIGHTRAG_API_KEY"
  # Optional (default: 20). Batch size for upload calls.
  batch_size: 20
  # Optional (default: 200). Page size for list APIs.
  list_page_size: 200
  # Optional (default: sync2rag). Prefix for file source identifiers.
  file_source_prefix: "sync2rag"
  # Optional (default: true). Delete missing files from LightRAG.
  delete_missing: true
  # Optional (default: true). Update files when content changes.
  update_on_change: true
  # Optional (default: false). Wait for inflight ingestion jobs.
  wait_inflight: false
  # Optional (default: 5). Poll interval for inflight jobs.
  inflight_poll_sec: 5
  # Optional (default: false). Delete LLM cache when removing.
  delete_llm_cache: false
  # Optional (default: false). Delete file blobs on removal.
  delete_file: false

runtime:
  # Optional (default: false). Run without side effects.
  dry_run: false
  # Optional (default: INFO). Logging level.
  log_level: INFO
  # Optional (default: 4). Max worker threads for processing.
  max_workers: 4
  # Optional (default: .state). Local state directory.
  state_dir: .state
  # Optional (default: true). Fail if OCR languages are missing.
  fail_on_missing_ocr_lang: true
